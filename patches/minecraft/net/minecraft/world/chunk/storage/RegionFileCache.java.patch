--- a/net/minecraft/world/chunk/storage/RegionFileCache.java
+++ b/net/minecraft/world/chunk/storage/RegionFileCache.java
@@ -18,8 +18,13 @@
       this.field_219101_a = p_i49938_1_;
    }
 
+   // Mohist - Compatible with vanilla
    private RegionFile func_219098_a(ChunkPos p_219098_1_) throws IOException {
-      long i = ChunkPos.func_77272_a(p_219098_1_.func_222241_h(), p_219098_1_.func_222242_i());
+      return loadFile(p_219098_1_, false);
+   }
+
+   private RegionFile loadFile(ChunkPos pos, boolean existingOnly) throws IOException { // CraftBukkit
+      long i = ChunkPos.func_77272_a(pos.func_222241_h(), pos.func_222242_i());
       RegionFile regionfile = this.field_219102_c.getAndMoveToFirst(i);
       if (regionfile != null) {
          return regionfile;
@@ -32,8 +37,9 @@
             this.field_219101_a.mkdirs();
          }
 
-         File file1 = new File(this.field_219101_a, "r." + p_219098_1_.func_222241_h() + "." + p_219098_1_.func_222242_i() + ".mca");
-         RegionFile regionfile1 = new RegionFile(file1, this.field_219101_a);
+         File file1 = new File(this.field_219101_a, "r." + pos.func_222241_h() + "." + pos.func_222242_i() + ".mca");
+         if (existingOnly && !file1.exists()) return null; // CraftBukkit
+         RegionFile regionfile1 = new RegionFile(file1, this.field_219101_a).extractLargeChunks(pos);
          this.field_219102_c.putAndMoveToFirst(i, regionfile1);
          return regionfile1;
       }
@@ -41,7 +47,7 @@
 
    @Nullable
    public CompoundNBT func_219099_e(ChunkPos p_219099_1_) throws IOException {
-      RegionFile regionfile = this.func_219098_a(p_219099_1_);
+      RegionFile regionfile = this.loadFile(p_219099_1_, false); // CraftBukkit
 
       CompoundNBT compoundnbt;
       try (DataInputStream datainputstream = regionfile.func_222666_a(p_219099_1_)) {
@@ -57,7 +63,7 @@
    }
 
    protected void func_219100_a(ChunkPos p_219100_1_, CompoundNBT p_219100_2_) throws IOException {
-      RegionFile regionfile = this.func_219098_a(p_219100_1_);
+      RegionFile regionfile = this.loadFile(p_219100_1_, false); // CraftBukkit
 
       try (DataOutputStream dataoutputstream = regionfile.func_222661_c(p_219100_1_)) {
          CompressedStreamTools.func_74800_a(p_219100_2_, dataoutputstream);
@@ -71,4 +77,11 @@
       }
 
    }
+
+   // CraftBukkit start
+   public boolean chunkExists(final ChunkPos pos) throws IOException {
+      RegionFile regionfile = loadFile(pos, true);
+      return regionfile != null && regionfile.func_222667_d(pos);
+   }
+   // CraftBukkit end
 }
